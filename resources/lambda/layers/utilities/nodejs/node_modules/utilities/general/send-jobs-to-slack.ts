import authoriseSlackWebhook from 'utilities/general/authorise-slack-webhook'



type Job = {
  [key: string]: string;
};

const sendJobsToSlack = async (jobs: Job[]) => {

  try {
    const webhook = authoriseSlackWebhook()

  for (const job of jobs) {
  await webhook.send({
    attachments: [
      {
        fallback: `New <${job.link}|Upwork> posting`,
        pretext: `New <${job.link}|Upwork> posting`,
         color:"#D00000",
         fields:[
            {
               "title": job.title,
               "value": job.uniqueProposal,
               "short":false
            }
         ]
      }
    ]
  })
  }
  } catch (error) {

    console.log(error, 'error')
    
  }

  



}

export default sendJobsToSlack